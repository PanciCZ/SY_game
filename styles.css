*{box-sizing:border-box}html,body{height:100%;margin:0;background:#0b0f14;color:#eaeff4;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}.topbar{position:sticky;top:env(safe-area-inset-top);display:flex;gap:12px;align-items:center;justify-content:space-between;padding:calc(8px + env(safe-area-inset-top)) 12px 8px;background:#11161d;border-bottom:1px solid #1f2a36}.brand{font-weight:700;white-space:nowrap}.controls{display:flex;flex-wrap:wrap;gap:8px;align-items:center}.controls .file{position:relative;display:inline-flex;align-items:center;gap:8px;background:#1b2430;border:1px solid #273141;border-radius:12px;padding:8px 12px;cursor:pointer}.controls .file input{position:absolute;inset:0;opacity:0;cursor:pointer}.controls button{background:#1b2430;border:1px solid #273141;border-radius:12px;padding:8px 12px;color:#eaeff4;cursor:pointer}.controls button:hover,.controls .file:hover{background:#222c3a}main{display:grid;grid-template-columns:1fr 300px;gap:0;height:calc(100% - 88px)}#board{width:100%;height:100%;display:block;touch-action:none;outline:none}#sidebar{background:#0f141b;border-left:1px solid #1f2a36;padding:12px;overflow:auto}.legend{display:grid;grid-template-columns:auto 1fr;gap:8px 12px;align-items:center}.legend .key{display:inline-block;width:18px;height:6px;border-radius:4px;margin-right:6px}.legend .taxi{background:#f4d03f}.legend .bus{background:#2ecc71}.legend .metro{background:#e74c3c}.footer{padding:8px 12px;border-top:1px solid #1f2a36;background:#11161d}@media (max-width:900px){main{grid-template-columns:1fr}#sidebar{grid-row:2}}
#gamePanel{border-top:1px solid #1f2a36;padding:12px;background:#0c1218}
#gamePanel .row{display:flex;gap:12px;flex-wrap:wrap;margin:8px 0}
#log{display:grid;gap:6px;margin-top:8px;max-height:280px;overflow:auto}
#log .entry{padding:8px 10px;background:#0f141b;border:1px solid #1f2a36;border-radius:10px}
.warn{color:#f39c12} .err{color:#e74c3c} .ok{color:#2ecc71}
.modes{display:flex;gap:16px;margin:6px 0}
#sidebar{display:flex;flex-direction:column}
#sidebar details{margin-top:10px}
#sidebar h2{margin-top:0}
