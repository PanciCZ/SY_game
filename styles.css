body,html{margin:0;height:100%;background:#0b0f14;color:#eaeff4;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
.topbar{display:flex;justify-content:space-between;align-items:center;padding:10px;background:#11161d;border-bottom:1px solid #1f2a36}
.controls button,.tab{margin-left:6px;background:#1b2430;color:#eaeff4;border:1px solid #273141;border-radius:10px;padding:8px 12px;cursor:pointer}
.controls button:hover,.tab:hover{background:#222c3a}
.tabs{display:flex;gap:8px;align-items:center}
.tab.active{background:#2a3545;border-color:#3a465a}

.view{display:none;height:calc(100% - 50px)}
.view.active{display:grid}
#view-map{grid-template-columns:1fr 320px}
#board{width:100%;height:100%;display:block;touch-action:none}
#panel{background:#0f141b;padding:10px;border-left:1px solid #1f2a36;overflow:auto}
.row{display:flex;flex-wrap:wrap;gap:10px;margin:10px 0}
#panel button{background:#1b2430;color:#eaeff4;border:1px solid #273141;border-radius:8px;padding:8px 12px;cursor:pointer}
#panel button:hover{background:#222c3a}
#log{max-height:60vh;overflow:auto;display:grid;gap:6px}
#log .entry{padding:6px 8px;background:#11161d;border:1px solid #1f2a36;border-radius:8px}

/* Mr.X cards: 3 columns */
#view-mrx{display:block;overflow:auto}
.mrx-log{padding:12px}
.mrx-cards{list-style:none;margin:0;padding:0;display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.mrx-card{display:flex;align-items:center;justify-content:space-between;background:#11161d;border:1px solid #1f2a36;border-radius:12px;padding:10px 12px;min-height:56px}
.mrx-badge{font-weight:800;border-radius:8px;padding:6px 10px;border:2px solid rgba(0,0,0,.75)}
.mrx-badge.taxi{background:#FFD54A;color:#0b0f14}
.mrx-badge.bus{background:#4CD964;color:#0b0f14}
.mrx-badge.metro{background:#FF3B30;color:#fff}
.mrx-badge.black{background:#000;color:#fff;border-color:#fff}
.mrx-step{font-size:18px;opacity:.8}
.mrx-reveal{font-weight:800;border:2px solid #e5e7eb;border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center}

/* Players */
#view-players{display:block;overflow:auto}
.players{padding:12px}
.players-table{overflow:auto;border:1px solid #1f2a36;border-radius:10px}
.players-table table{width:100%;border-collapse:collapse}
.players-table th,.players-table td{border:1px solid #1f2a36;padding:8px;text-align:center}
.players-table thead th{position:sticky;top:0;background:#0f141b}
.players-table input{width:64px;background:#0b0f14;color:#eaeff4;border:1px solid #273141;border-radius:6px;padding:6px;text-align:center}
.players-table td.invalid{outline:2px solid #ef4444}

/* === Scrollovací log panel === */
#logContainer {
  max-height: calc(100vh - 300px); /* uprav dle potřeby */
  overflow-y: auto;
  scroll-behavior: smooth;
}

/* === Skrytí tahů Mr. X při vypnuté cestě === */
.hidden-mrx #log .entry.mrx:not(.reveal) {
  display: none;
}

/* === iPad fixes: rigid layout + momentum scroll === */
#panel {
  display: flex;
  flex-direction: column;
  overflow: hidden; /* nechť scrolluje jen log */
}
#logContainer {
  flex: 1 1 auto;
  min-height: 0;              /* důležité pro flex scroll oblast */
  overflow-y: auto;
  -webkit-overflow-scrolling: touch; /* iOS plynulé rolování */
  scroll-behavior: smooth;
}
/* zajistí, že pole nejsou <16px, aby iOS nezvětšoval zoom při focuse */
#panel input, .players-table input {
  font-size: 16px;
}
